import{a,p as e,w as j,M as E,L as w,S as y,q as v,O as R}from"./chunk-NISHYRIK-BTx4j41q.js";import{E as l}from"./error-handler-CVdyEt7f.js";class C extends a.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,t){console.error("React Error Boundary caught an error:",r,t),this.props.onError&&this.props.onError(r,t),l.handleComponentError(r,t),this.setState({errorInfo:t})}handleReload=()=>{window.location.reload()};handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"申し訳ございません"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["アプリケーションでエラーが発生しました。",e.jsx("br",{}),"ページを再読み込みするか、もう一度お試しください。"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:this.handleRetry,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"もう一度試す"}),e.jsx("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"ページを再読み込み"})]}),!1]})}):this.props.children}}function L({message:n,type:r,duration:t=5e3,onClose:h}){const[u,x]=a.useState(!0),[p,m]=a.useState(!1);a.useEffect(()=>{const s=setTimeout(()=>{c()},t);return()=>clearTimeout(s)},[t]);const c=()=>{m(!0),setTimeout(()=>{x(!1),h()},300)},g=()=>{const s="flex items-start p-4 rounded-lg shadow-lg border-l-4 max-w-md";switch(r){case"NETWORK_ERROR":return`${s} bg-orange-50 dark:bg-orange-900/20 border-orange-500 text-orange-800 dark:text-orange-200`;case"DATA_LOAD_ERROR":return`${s} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;case"SESSION_ERROR":return`${s} bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200`;case"VALIDATION_ERROR":return`${s} bg-purple-50 dark:bg-purple-900/20 border-purple-500 text-purple-800 dark:text-purple-200`;case"COMPONENT_ERROR":return`${s} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;default:return`${s} bg-gray-50 dark:bg-gray-800 border-gray-500 text-gray-800 dark:text-gray-200`}},k=()=>{const s="w-5 h-5 flex-shrink-0 mt-0.5";switch(r){case"NETWORK_ERROR":return e.jsx("svg",{className:`${s} text-orange-500`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"DATA_LOAD_ERROR":case"COMPONENT_ERROR":return e.jsx("svg",{className:`${s} text-red-500`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"SESSION_ERROR":return e.jsx("svg",{className:`${s} text-yellow-500`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"VALIDATION_ERROR":return e.jsx("svg",{className:`${s} text-purple-500`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return e.jsx("svg",{className:`${s} text-gray-500`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return u?e.jsx("div",{className:`
        fixed top-4 right-4 z-50 transition-all duration-300 transform
        ${p?"translate-x-full opacity-0":"translate-x-0 opacity-100"}
      `,children:e.jsxs("div",{className:g(),children:[k(),e.jsx("div",{className:"ml-3 flex-1",children:e.jsx("p",{className:"text-sm font-medium leading-5",children:n})}),e.jsx("button",{onClick:c,className:"ml-4 flex-shrink-0 text-current hover:opacity-70 transition-opacity","aria-label":"エラー通知を閉じる",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}function N({toasts:n,onRemoveToast:r}){return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:n.map(t=>e.jsx(L,{message:t.message,type:t.type,onClose:()=>r(t.id)},t.id))})}function O(){const[n,r]=a.useState([]);a.useEffect(()=>{const o=i=>{const{message:d,type:b}=i.detail;t(d,b)};return window.addEventListener("app-error",o),()=>{window.removeEventListener("app-error",o)}},[]);const t=a.useCallback((o,i)=>{const b={id:`toast-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,message:o,type:i};r(f=>[...f,b])},[]),h=a.useCallback(o=>{r(i=>i.filter(d=>d.id!==o))},[]),u=a.useCallback(()=>{r([])},[]),x=a.useCallback(o=>{l.handleNetworkError(o)},[]),p=a.useCallback(o=>{l.handleDataLoadError(o)},[]),m=a.useCallback(o=>{l.handleSessionError(o)},[]),c=a.useCallback(o=>{l.handleValidationError(o)},[]),g=a.useCallback((o,i)=>{l.handleComponentError(o,i)},[]),k=a.useCallback(()=>l.getErrorLogs(),[]),s=a.useCallback(()=>{l.clearErrorLogs()},[]);return{toasts:n,addToast:t,removeToast:h,clearAllToasts:u,handleNetworkError:x,handleDataLoadError:p,handleSessionError:m,handleValidationError:c,handleComponentError:g,getErrorLogs:k,clearErrorLogs:s}}const A=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"}];function M({children:n}){return e.jsxs("html",{lang:"ja",children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),e.jsx("meta",{name:"description",content:"AWS CloudOps Engineer - Associate 認定試験対策アプリ。実践的な問題で効率的に学習できます。"}),e.jsx("meta",{name:"keywords",content:"AWS, CloudOps, 試験対策, 認定試験, Associate, 学習アプリ"}),e.jsx("meta",{name:"author",content:"AWS CloudOps 試験対策アプリ"}),e.jsx("meta",{name:"theme-color",content:"#3b82f6"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),e.jsx("meta",{name:"apple-mobile-web-app-title",content:"AWS CloudOps 試験対策"}),e.jsx("meta",{name:"format-detection",content:"telephone=no"}),e.jsx(E,{}),e.jsx(w,{})]}),e.jsxs("body",{children:[n,e.jsx(y,{}),e.jsx(v,{})]})]})}const $=j(function(){const{toasts:r,removeToast:t}=O();return e.jsxs(C,{children:[e.jsx(R,{}),e.jsx(N,{toasts:r,onRemoveToast:t})]})});export{M as Layout,$ as default,A as links};
