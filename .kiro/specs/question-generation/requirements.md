# 要件定義書

## 概要

この機能は、AWS CloudOps試験対策アプリケーションの問題データベースを現在の11問から200問の高品質な問題に大幅に拡張することを目的としています。拡張では、aws-docsツールを通じたAWSドキュメントと公式のAWS Certified CloudOps Engineer - Associate (SOA-C03)試験ガイドを活用して、5つのコンテンツドメインすべてを適切な配分と難易度レベルでカバーする包括的で現実的な試験問題を作成します。

## 要件

### 要件1

**ユーザーストーリー:** AWS CloudOps認定試験の準備をしている学習者として、200問の大規模な練習問題プールにアクセスしたい。そうすることで、重複なしにすべての試験ドメインを徹底的に準備できる。

#### 受入基準

1. 問題生成プロセスが完了した時、システムはquestions.jsonファイルに正確に200問を含むものとする
2. 問題が生成された時、システムは既存のJSON構造と形式を維持するものとする
3. 問題データベースが拡張された時、システムは既存の11問をすべて保持しながら189問の新しい問題を追加するものとする
4. 問題が作成された時、各問題は"q001"から"q200"のパターンに従った一意のIDを持つものとする

### 要件2

**ユーザーストーリー:** 学習者として、公式試験の重み付けに従ってすべての試験ドメインに問題が配分されることを望む。そうすることで、練習が実際の試験構造を反映する。

#### 受入基準

1. 問題がドメイン別に配分された時、ドメイン1（監視、ログ記録、分析、修復、パフォーマンス最適化）は約44問（200問の22%）を含むものとする
2. 問題がドメイン別に配分された時、ドメイン2（信頼性とビジネス継続性）は約44問（200問の22%）を含むものとする
3. 問題がドメイン別に配分された時、ドメイン3（デプロイメント、プロビジョニング、自動化）は約44問（200問の22%）を含むものとする
4. 問題がドメイン別に配分された時、ドメイン4（セキュリティとコンプライアンス）は約32問（200問の16%）を含むものとする
5. 問題がドメイン別に配分された時、ドメイン5（ネットワーキングとコンテンツ配信）は約36問（200問の18%）を含むものとする
6. ドメイン配分が計算された時、合計は正確に200問になるものとする

### 要件3

**ユーザーストーリー:** 学習者として、様々な難易度レベルの問題を望む。そうすることで、基本から上級概念まで段階的に知識を構築できる。

#### 受入基準

1. 問題が生成された時、約30%は「easy」難易度としてマークされるものとする
2. 問題が生成された時、約50%は「medium」難易度としてマークされるものとする
3. 問題が生成された時、約20%は「hard」難易度としてマークされるものとする
4. 難易度が割り当てられた時、各問題は["easy", "medium", "hard"]のセットから正確に1つの難易度レベルを持つものとする

### 要件4

**ユーザーストーリー:** 学習者として、単一選択と複数選択の両方の形式を含む問題を望む。そうすることで、実際の試験と同じ問題タイプで練習できる。

#### 受入基準

1. 問題が生成された時、約80%は「single」選択問題であるものとする
2. 問題が生成された時、約20%は「multiple」選択問題であるものとする
3. 問題が単一選択の時、正確に1つの正解を持つものとする
4. 問題が複数選択の時、5-6個の総選択肢から2-3個の正解を持つものとする

### 要件5

**ユーザーストーリー:** 学習者として、各問題に詳細な説明と学習リソースが含まれることを望む。そうすることで、正解の理由を理解し、間違った選択から学ぶことができる。

#### 受入基準

1. 問題が生成された時、なぜ正解が正しいかの包括的な説明を含むものとする
2. 問題が生成された時、タイトル、URL、タイプを含む少なくとも1つの学習リソースを含むものとする
3. 学習リソースが提供された時、可能な限り公式AWSドキュメントを参照するものとする
4. 問題が生成された時、分類のための関連AWSサービスタグを含むものとする
5. 問題が生成された時、問題や回答で言及される関連AWSサービスをリストするものとする

### 要件6

**ユーザーストーリー:** アプリケーションを保守する開発者として、権威あるAWSドキュメントを使用して問題が生成されることを望む。そうすることで、コンテンツが正確で最新である。

#### 受入基準

1. 問題が生成された時、コンテンツはAWS Knowledge MCP Server（https://knowledge-mcp.global.api.aws）を通じてアクセスされる公式AWSドキュメントに基づくものとする
2. AWSサービスが参照された時、情報はAWSドキュメント、API参照、What's New投稿、Builder Center、ブログ投稿、アーキテクチャ参照、Well-Architectedガイダンスに従って現在かつ正確であるものとする
3. 技術的詳細が含まれた時、AWS Knowledge MCP Serverの以下のツールを使用して検証されるものとする：
   - `search_documentation`: 全AWSドキュメントの検索
   - `read_documentation`: AWSドキュメントページの取得とマークダウン変換
   - `recommend`: AWSドキュメントページのコンテンツ推奨
   - `list_regions`: AWS全リージョンの取得（実験的）
   - `get_regional_availability`: AWSリージョン別可用性情報の取得（実験的）
4. ベストプラクティスが言及された時、AWS Well-Architectedフレームワークの原則と一致するものとする
5. MCP統合が設定された時、fastmcpユーティリティを使用してHTTPからstdioへのプロキシ機能を提供するものとする

### 要件7

**ユーザーストーリー:** 学習者として、現実的な試験シナリオを反映する問題を望む。そうすることで、練習体験が実際の認定試験に近くなる。

#### 受入基準

1. 問題が作成された時、公式AWS認定問題の形式とスタイルに従うものとする
2. シナリオが提示された時、実世界のCloudOpsエンジニアリング状況を反映するものとする
3. 誤答選択肢（不正解）が作成された時、もっともらしいが知識のある候補者には明らかに間違いであるものとする
4. 問題がAWSサービスを参照する時、試験ガイドで「範囲内」としてリストされたサービスのみを使用するものとする
5. 問題が生成された時、試験ガイドで「範囲外」としてリストされたサービスを避けるものとする

### 要件8

**ユーザーストーリー:** アプリケーションのユーザーとして、拡張された問題データベースが既存の機能とシームレスに統合されることを望む。そうすることで、すべての現在の機能が変更なしに継続して動作する。

#### 受入基準

1. 問題データベースが拡張された時、すべての既存のクイズモードは正しく機能し続けるものとする
2. 問題が追加された時、ドメインフィルタリング機能は新しい問題で動作するものとする
3. アプリケーションが読み込まれた時、拡張されたquestions.jsonファイルを正常に解析し検証するものとする
4. 問題が表示された時、日本語と英語の両方のコンテキストで正しくレンダリングされるものとする
5. questions.jsonメタデータが更新された時、新しい総数とドメイン配分を反映するものとする